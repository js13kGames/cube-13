!function(){"use strict";let F=document,t=devicePixelRatio,e=F=>F.getContext("2d"),o=()=>e(F.createElement("canvas")),r=F=>F.canvas,i=F=>r(F).width,l=F=>r(F).height,a=(F,t)=>r(F).width=t,f=(F,t)=>r(F).height=t,n=F=>F.resetTransform(),d=()=>performance.now(),X={o:d(),r:0},u=[],c=F=>F*F,s=F=>F<1/2.75?7.5625*F*F:F<2/2.75?7.5625*(F-=1.5/2.75)*F+.75:F<2.5/2.75?7.5625*(F-=2.25/2.75)*F+.9375:7.5625*(F-=2.625/2.75)*F+.984375,W=(F,t,e,o,r,i,l)=>{let a=F[t];u.push({i:F,l:t,n:a,p:e,m:0,offsetS:o,h:r,easing:i,v:l})},b=16,p=(F,t,e,o)=>({w:F,g:t,k:F+e,V:t+o}),Y=Math,G=Y.floor,m=Y.min,y=Y.max,M=Y.hypot,A=Y.abs,h=Y.random,v=(F,t,e)=>m(t,y(F,e)),E=(F,t)=>{let e=(F=>M(F.x,F.y))(F);e>0&&(e=t/e,F.x*=e,F.y*=e)},D=[],x=F=>D.find((t=>t.$.id===F)),w=[],S=()=>{w.splice(0,w.length);for(let F of D)F.$.j&&w.push(F)},N=(F,t,e,o)=>{let r=((F,t,e,o)=>F.w+t.x<e.k+o.x&&F.g+t.y<e.V+o.y&&e.w+o.x<F.k+t.x&&e.g+o.y<F.V+t.y)(F.$.j.J,F,t.$.j.J,t);if(r){let r=((F,t)=>({x:t.x-F.x,y:t.y-F.y}))(F,t);E(r,1),A(r.x)>A(r.y)?(F.x-=r.x*e,t.x+=r.x*o,F.y=G(F.y),t.y=G(t.y)):(F.y-=r.y*e,t.y+=r.y*o,F.x=G(F.x),t.x=G(t.x))}return r},O=56,P=new AudioContext,g=1*(Math.exp(.5)-1);function L(F){let t=function(F){let t=0,e=F[5],o=Math.abs(F[6]),r=F[6]>0,i=F[7],l=F[8],a=F[13],f=F[14],n=F[11],d=F[12],X=e,u=i,c=a,s=f,W=d,b=F[0],p=F[18],Y=.1!==p,G=F[19],m=F[20],y=F[21],M=F[22],A=F[10],h=F[9],v=[F[1],F[2],F[4]],E=F[3],D=F[16],x=F[17],w=F[15],S=0,N=0,O=0,P=new Float32Array(32);for(let F=0;F<32;++F)P[F]=2*Math.random()-1;let L=0,U=0,H=0,k=0,V=0,z=new Float32Array(1024);for(let F=0;F<1024;++F)z[F]=0;let C=[];for(let F=0;0!==w&&++t>=w&&(X=e,u=i,c=a,s=f,W=d),0!==W&&F>=W&&(W=0,X*=n),u+=l,X*=u,!(X>o&&(X=o,r));++F){let F=X;h>0&&(H+=A,F=X*(1+Math.sin(H)*h));let t=Math.floor(F);if(t<8&&(t=8),c+=s,c<0&&(c=0),c>.5&&(c=.5),++U>v[L]&&(U=0,++L>2))break;let e,o=U/v[L];e=0===L?o:1===L?1+2*(1-o)*E:1-o,D+=x;let r=Math.abs(Math.floor(D));r>1023&&(r=1023),0!==M&&(y*=M,y<1e-5&&(y=1e-5),y>.1&&(y=.1));let i=0;for(let F=0;F<8;++F){let F=0;if(++k,k>=t&&(k%=t,3===b))for(let F=0;F<32;++F)P[F]=2*Math.random()-1;let o=k/t;0===b?F=o<c?.5:-.5:1===b?F=o<c?2*o/c-1:1-2*(o-c)/(1-c):2===b?F=Math.sin(2*o*Math.PI):3===b&&(F=P[32*k/t|0]);let l=S;p*=G,p<0&&(p=0),p>.1&&(p=.1),Y?(N+=(F-S)*p,N-=N*m):(S=F,N=0),S+=N,O+=S-l,O-=O*y,F=O,z[1023&V]=F,F+=z[V-r+1024&1023],V=V+1&1023,i+=F*e}C.push(i*g/8)}return new Float32Array(C)}(F),e=P.createBuffer(1,t.length,44100);return e.copyToChannel(t,0,0),e}let U=[],H=[];function k(F,t=1){H[F]||(H[F]=L(new Float32Array(U[F])));let e=P.createBufferSource();e.buffer=H[F];let o=P.createGain();o.gain.value=.5*t,e.connect(o),o.connect(P.destination),e.start()}let V={q:!1,R:0},z=[4,5,6,7],C=()=>{let F=x(2),t=x(1);var e,o,r,i;F&&F.$.j&&t&&(i=t,M((r=F).x-i.x,r.y-i.y)<2&&(e=t,(o=F).x=e.x,o.y=e.y,F.$.j=void 0,S(),W(F,"z",8,0,.4,s,(()=>{t.$.T.id=12,(F=>{D.splice(D.indexOf(F),1)})(F),V.q=!0,k(0)}))))},I={a:1,b:0,c:0,d:1,e:0,f:0},$={a:0,b:1,c:-1,d:0,e:b,f:0},j={a:-1,b:0,c:0,d:-1,e:b,f:b},J={a:0,b:-1,c:1,d:0,e:0,f:b},K={B:!0,J:p(0,0,b,b)},q={J:p(0,0,b,b)},R={A:{Q:{id:67},T:{id:O}},Y:{Q:{id:59},j:K},C:{T:{id:57}},K:{T:{id:57,Z:$}},D:{T:{id:O,Z:J}},E:{T:{id:O,Z:$}},F:{T:{id:8},Q:{id:71}},G:{T:{id:9},Q:{id:71}},P:{T:{id:10},Q:{id:71}},S:{T:{id:13},Q:{id:71}},W:{Q:{id:71}},U:{Q:{id:70},j:K},H:{Q:{id:70},T:{id:O,Z:J}},I:{Q:{id:70},T:{id:O,Z:$}},L:{Q:{id:59},T:{id:58},j:K},M:{Q:{id:60},T:{id:58,Z:$},j:K},N:{Q:{id:61},T:{id:58,Z:j},j:K},O:{Q:{id:62},T:{id:58,Z:J},j:K},X:{j:K},a:{j:q,Q:{id:0},T:{id:1},_:8},b:{j:q,Q:{id:2},T:{id:3},_:8,id:2},u:{j:{J:p(3,10,9,7)},Q:{id:48},id:0},s:{T:{id:11},id:1},t:{Q:{id:68},T:{id:O},id:4},d:{Q:{id:4},T:{id:O},j:K,id:3}},T=["CAAAAAAtAAAAAAK","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","H             I"],B=[[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFFFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X     aaaa    X","X     a       X","X     a   b   X","X     a       X","X    aa       X","X             X","U      u      U"," XXXXXXXXXXXXX "],T],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X        NOLMNX","X        M    X","X        L    X","X        O    X","X      LMN    X","XLMNaLMN      X","X         b   X","X             X","X    aa       X","X             X","U      u      U"," XXXXXXXXXXXXX "],T]],Q=[],Z={},_=(F,t)=>{if(void 0===t||1===t)return Q[F];{let e=Z[F];e||(Z[F]={},e=Z[F]);let o=G(32*t),r=e[o];return r||(e[o]=tF(F,(F=>{F[0]=F[0]*t,F[1]=F[1]*t,F[2]=F[2]*t})),r=e[o]),r}},FF=(F,t)=>{if(0==t)return Q[F];{let e=Z[F];e||(Z[F]={},e=Z[F]);let o=e[t];if(!o){let r=t>>16&255,i=t>>8&255,l=255&t;e[t]=tF(F,(F=>{F[0]=r,F[1]=i,F[2]=l})),o=e[t]}return o}},tF=(F,t)=>{let n=e(Q[F]),d=i(n),X=l(n),u=o();a(u,d),f(u,X);let c=n.getImageData(0,0,d,X),s=u.getImageData(0,0,d,X),W=c.data,b=s.data,p=0;for(;p<W.length;){let F=W.slice(p,p+4);t(F),b.set(F,p),p+=4}return u.putImageData(s,0,0),r(u)},eF=[],oF=()=>{for(let F of D)if(F.x>0&&F.x<224&&F.y>0&&F.y<224){let t=F.$;if(t.Q){let F={id:t.Q.id,run(){for(let F=0;F<32;F++)_(this.id,F/32)}};eF.push(F)}}};var rF;!function(F){F[F.MainMenu=0]="MainMenu",F[F.Game=1]="Game",F[F.NextLevel=2]="NextLevel",F[F.GameOver=3]="GameOver"}(rF||(rF={}));let iF={FF:0,state:rF.Game,time:0},lF=()=>{(F=>{let t=B[F];D.splice(0,D.length);let e=0;for(let F of t){let t=0,r=0;for(let i of F){for(let F of i){if(" "!==F){let i=(o=R[F],JSON.parse(JSON.stringify(o)));D.push({x:t,y:r,z:e,$:i})}t+=b}t=0,r+=b}e+=b}var o})(iF.FF),S(),V.q=!1,V.R=0,oF(),iF.time=0},aF=()=>{let F=X.r,t=G(iF.time);iF.time+=F;let e=G(iF.time);if(t!=e&&e<=13){let F=5;k(5,.1+.5*v(0,1,(e-F)/(13-F)))}iF.time>=13&&(iF.state=rF.GameOver,(()=>{let F=[];for(let r=1;r<14;r++)for(let i=1;i<14;i++)F[13*i+r]=(t=0,e=1,o=h(),t+o*(e-t));var t,e,o;for(let t of D)if(t.x>0&&t.x<224&&t.y>0&&t.y<224){let e=G(t.x/b),o=F[13*G(t.y/b)+e]||0;W(t,"z",-80,o,.5,c)}k(2)})())},fF={},nF=F=>fF[F],dF=[14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],XF=(F,t)=>F.y+F.z-t.y-t.z,uF=(()=>{let F=o();return a(F,240),f(F,288),F})(),cF=e(F.getElementById("c")),sF=(F,t,e,o)=>{if(o){let r=_(o.id,o.brigthness),i=o.Z||I;F.setTransform(i.a,i.b,i.c,i.d,i.e+t,i.f+e),F.drawImage(r,0,0)}},WF=()=>{for(let F of D){let t=v(0,1,(F.z- -48)/48),e=F.$;e.Q&&(e.Q.brigthness=t),e.T&&(e.T.brigthness=t)}},bF=[40,41,42,43],pF=[44,45,46,47],YF=[48,49,50,51],GF=[52,53,54,55],mF={R:0};let yF=()=>{let F=x(0),t=x(3);F&&t&&A(F.x-t.x)<8&&F.y<t.y&&(iF.FF++,iF.FF=iF.FF%B.length,lF(),k(4))};function MF(){(()=>{let F=X.o;X.o=d(),X.r=(X.o-F)/1e3})(),iF.state==rF.Game&&((()=>{let F=X.r,t=x(0);if(t){let r,i=((F=0,t=0)=>({x:F,y:t}))();if(nF(37)?(r=GF,i.x=-1):nF(39)&&(r=pF,i.x=1),nF(38)?(r=YF,i.y=-1):nF(40)&&(r=bF,i.y=1),r){mF.R+=10*F;let l=G(mF.R%r.length);t.$.Q.id=r[l],E(i,30*F),o=i,(e=t).x+=o.x,e.y+=o.y}}var e,o})(),(()=>{let F=w.length,t=20;for(;t--;){let t=0;for(let e=0;e<F;e++){let o=w[e];for(let r=e+1;r<F;r++){let F=w[r],e=!1;o.$.j.B?F.$.j.B||(e=N(o,F,0,1)):e=F.$.j.B?N(o,F,1,0):N(o,F,.5,.5),e&&t++}}if(!t)break}})(),C(),(()=>{if(V.q&&V.R<z.length){V.R+=5*X.r;let F=G(V.R),t=x(3);if(t)if(F<z.length)t.$.Q.id=z[F];else{t.$.Q=void 0,t.$.j=void 0,S();let F=x(4);F&&(F.$.Q.id=69,k(1))}}})(),yF(),aF()),(()=>{let F=eF.shift();F&&F.run()})(),(()=>{let F=X.r;u=u.filter((t=>{if(t.offsetS>0)return t.offsetS-=F,!0;{t.m+=F;const{i:e,l:o,n:r,p:i,h:l,easing:a,v:f}=t;if(t.m>l)return e[o]=i,f&&f(),!1;{let F=a(t.m/l);return e[o]=r+(i-r)*F,!0}}}))})(),(()=>{let F=i(uF),e=l(uF),o=r(uF);n(uF),uF.fillRect(0,0,F,e),D.sort(XF),WF();for(let F of D){let t=G(F.x+0),e=G(F.y+64-F.z),o=F.$,r=o._||b;sF(uF,t,e,o.Q),sF(uF,t,e-r,o.T)}n(uF);for(let F=0;F<dF.length;F++){let t=FF(dF[F],16777215);uF.drawImage(t,2+8*F,2)}let u=innerWidth*t,c=innerHeight*t;i(cF)!=u&&a(cF,u),l(cF)!=c&&f(cF,c);let s=i(cF),W=l(cF),p=m(s/F,W/e);n(cF),cF.clearRect(0,0,s,W),cF.setTransform(p,0,0,p,0,0),cF.imageSmoothingEnabled=!1,cF.drawImage(o,0,0);{let F=(d()-X.o).toFixed(),t=(1/X.r).toFixed(),e="";cF.fillStyle="white",cF.font="arial 20px",cF.fillText(`FPS ${t}   TIME ${F} ms   ${e}`,0,20)}})(),requestAnimationFrame(MF)}!async function(){await async function(){let F=await fetch("r"),t=await F.arrayBuffer(),e=new Uint8Array(t),i=0,l=4*e[i++],n=e.slice(i,i+l);i+=l;let d=e[i++];for(;d--;){let F=e[i++],t=e[i++],l=F*t,d=e.slice(i,i+l);i+=l;let X=o();a(X,F),f(X,t);let u=X.getImageData(0,0,F,t);for(let F=0;F<d.length;F++){let t=d[F]<<2;u.data.set(n.slice(t,t+4),F<<2)}X.putImageData(u,0,0),Q.push(r(X))}let X=e[i++];for(;X--;){let F=e[i++];U.push(t.slice(i,i+F)),i+=F}}(),F.onkeydown=F=>{fF[F.keyCode]=!0},F.onkeyup=F=>{fF[F.keyCode]=void 0},lF(),MF()}()}();
