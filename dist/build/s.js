!function(){"use strict";let F=document,X="ontouchstart"in window,t=devicePixelRatio,e=F=>F.getContext("2d"),W=()=>e(F.createElement("canvas")),o=F=>F.canvas,i=F=>o(F).width,Y=F=>o(F).height,G=(F,X)=>o(F).width=X,r=(F,X)=>o(F).height=X,l=F=>F.resetTransform(),f=(F,X,t,e)=>F.drawImage(X,t,e),n=F=>{l(F),F.clearRect(0,0,i(F),Y(F))},a=()=>performance.now();let d={o:a(),i:0},s=[],c=F=>F*F,u=F=>F<1/2.75?7.5625*F*F:F<2/2.75?7.5625*(F-=1.5/2.75)*F+.75:F<2.5/2.75?7.5625*(F-=2.25/2.75)*F+.9375:7.5625*(F-=2.625/2.75)*F+.984375,b=(F,X,t,e,W,o,i)=>{let Y=F[X];s.push({r:F,l:X,n:Y,p:t,h:0,m:e,T:W,k:o,v:i})},P=16,E=F=>F.x>0&&F.x<224&&F.y>0&&F.y<224,U=F=>F.z==P&&E(F),p=F=>0==F.z&&E(F),y=(F,X,t,e)=>({g:F,V:X,$:F+t,R:X+e}),A=(F,X,t,e)=>F.g+X.x<t.$+e.x&&F.V+X.y<t.R+e.y&&t.g+e.x<F.$+X.x&&t.V+e.y<F.R+X.y,S=Math,h=S.floor,m=S.round,M=S.min,L=S.max,w=S.hypot,N=S.abs,T=S.random,k=S.atan2,D=S.PI,O=2*D,v=(F,X,t)=>M(X,L(F,t)),g=(F,X)=>((F,X,t)=>F+t*(X-F))(F,X,T()),V=(F=0,X=0)=>({x:F,y:X}),x=(F,X)=>({x:X.x-F.x,y:X.y-F.y}),I=F=>w(F.x,F.y),$=(F,X)=>{let t=I(F);t>0&&(t=X/t,F.x*=t,F.y*=t)},C=[],H=F=>C.find((X=>X.j.id===F)),R=F=>C.splice(C.indexOf(F),1),K=76,z=91,j={a:1,b:0,c:0,d:1,e:0,f:0},J={a:0,b:1,c:-1,d:0,e:P,f:0},q={a:-1,b:0,c:0,d:-1,e:P,f:P},B={a:0,b:-1,c:1,d:0,e:0,f:P},Q=y(0,0,P,P),Z={J:!0,q:Q},_={q:Q},FF={A:{B:{id:87},Q:{id:K}},Y:{B:{id:79},Z:Z},C:{Q:{id:77}},K:{Q:{id:77,_:J}},D:{Q:{id:K,_:B}},E:{Q:{id:K,_:J}},F:{Q:{id:12},B:{id:z}},G:{Q:{id:13},B:{id:z}},P:{Q:{id:14},B:{id:z},id:9},S:{Q:{id:17},B:{id:z}},W:{B:{id:z}},U:{B:{id:90},Z:Z},H:{B:{id:90},Q:{id:K,_:B}},I:{B:{id:90},Q:{id:K,_:J}},L:{B:{id:79},Q:{id:78},Z:Z},M:{B:{id:80},Q:{id:78,_:J},Z:Z},N:{B:{id:81},Q:{id:78,_:q},Z:Z},O:{B:{id:82},Q:{id:78,_:B},Z:Z},X:{Z:Z},a:{Z:_,B:{id:0},Q:{id:1},FF:8},b:{Z:_,B:{id:2},Q:{id:3},FF:8,id:2},c:{Z:_,B:{id:4},Q:{id:5},FF:8,id:4},f:{Z:_,B:{id:6},Q:{id:7},FF:8,id:6},u:{Z:{q:y(3,10,9,7)},B:{id:68},id:0},s:{Q:{id:15},B:{id:z},id:1},w:{Q:{id:18},B:{id:z},id:3},y:{Q:{id:20},B:{id:z},id:5},t:{B:{id:88},Q:{id:K},id:8},d:{B:{id:8},Q:{id:K},Z:Z,id:7}},XF=[],tF=[],eF=[],WF=!1,oF=()=>{WF=!0},iF=()=>{(()=>{if(WF){WF=!1,XF.splice(0,XF.length),tF.splice(0,tF.length),eF.splice(0,eF.length);for(let F of C)F.j.Z&&XF.push(F),U(F)&&eF.push(F),p(F)&&tF.push(F)}})(),function(){let F=XF.length,X=20;for(;X--;){let X=0;for(let t=0;t<F;t++){let e=XF[t];for(let W=t+1;W<F;W++){let F=XF[W],t=!1;e.j.Z.J?F.j.Z.J||(t=YF(e,F,0,1)):t=F.j.Z.J?YF(e,F,1,0):YF(e,F,.5,.5),t&&X++}}if(!X)break}}(),function(){for(let F of eF)if(F.z==P){let X=F.j.Z?F.j.Z.q:Q,t=!1;for(let e of tF)if(A(X,F,Q,e)){t=!0;break}t||lF(F)}}()},YF=(F,X,t,e)=>{let W=A(F.j.Z.q,F,X.j.Z.q,X);if(W){let W=x(F,X);$(W,1),N(W.x)>N(W.y)?(F.x-=W.x*t,X.x+=W.x*e,F.y=h(F.y),X.y=h(X.y)):(F.y-=W.y*t,X.y+=W.y*e,F.x=h(F.x),X.x=h(X.x))}return W};let GF,rF=async(F,X)=>{await async function(F){return new Promise((X=>{setTimeout(X,F)}))}(1e3*X),lF(F)},lF=F=>{F.z-=1,delete F.j.Z,oF(),b(F,"z",F.z-96,0,.5,c,(()=>R(F)))},fF=1*(Math.exp(.5)-1);function nF(F,X){let t=function(F){let X=0,t=F[5],e=Math.abs(F[6]),W=F[6]>0,o=F[7],i=F[8],Y=F[13],G=F[14],r=F[11],l=F[12],f=t,n=o,a=Y,d=G,s=l,c=F[0],u=F[18],b=.1!==u,P=F[19],E=F[20],U=F[21],p=F[22],y=F[10],A=F[9],S=[F[1],F[2],F[4]],h=F[3],m=F[16],M=F[17],L=F[15],w=0,N=0,T=0,k=new Float32Array(32);for(let F=0;F<32;++F)k[F]=2*Math.random()-1;let D=0,O=0,v=0,g=0,V=0,x=new Float32Array(1024);for(let F=0;F<1024;++F)x[F]=0;let I=[];for(let F=0;0!==L&&++X>=L&&(f=t,n=o,a=Y,d=G,s=l),0!==s&&F>=s&&(s=0,f*=r),n+=i,f*=n,!(f>e&&(f=e,W));++F){let F=f;A>0&&(v+=y,F=f*(1+Math.sin(v)*A));let X=Math.floor(F);if(X<8&&(X=8),a+=d,a<0&&(a=0),a>.5&&(a=.5),++O>S[D]&&(O=0,++D>2))break;let t,e=O/S[D];t=0===D?e:1===D?1+2*(1-e)*h:1-e,m+=M;let W=Math.abs(Math.floor(m));W>1023&&(W=1023),0!==p&&(U*=p,U<1e-5&&(U=1e-5),U>.1&&(U=.1));let o=0;for(let F=0;F<8;++F){let F=0;if(++g,g>=X&&(g%=X,3===c))for(let F=0;F<32;++F)k[F]=2*Math.random()-1;let e=g/X;0===c?F=e<a?.5:-.5:1===c?F=e<a?2*e/a-1:1-2*(e-a)/(1-a):2===c?F=Math.sin(2*e*Math.PI):3===c&&(F=k[32*g/X|0]);let i=w;u*=P,u<0&&(u=0),u>.1&&(u=.1),b?(N+=(F-w)*u,N-=N*E):(w=F,N=0),w+=N,T+=w-i,T-=T*U,F=T,x[1023&V]=F,F+=x[V-W+1024&1023],V=V+1&1023,o+=F*t}I.push(o*fF/8)}return new Float32Array(I)}(X),e=F.createBuffer(1,t.length,44100);return e.copyToChannel(t,0,0),e}let aF=[],dF=[];function sF(){GF||(GF=new AudioContext)}function cF(F,X=1){if(GF){dF[F]||(dF[F]=nF(GF,new Float32Array(aF[F])));let t=GF.createBufferSource();t.buffer=dF[F];let e=GF.createGain();e.gain.value=.5*X,t.connect(e),e.connect(GF.destination),t.start()}}X||sF();let uF={XF:!1,tF:0},bF=[8,9,10,11],PF=(F,X,t,e)=>{let W=H(X);if(W&&(F.push(W),W.j.Z)){let F=H(t);F&&(G=F,w((Y=W).x-G.x,Y.y-G.y)<2&&(o=F,(i=W).x=o.x,i.y=o.y,delete W.j.Z,oF(),b(W,"z",8,0,.4,u,(()=>{F.j.Q.id=e,R(W),cF(1)}))))}var o,i,Y,G},EF=["CAAAAAAtAAAAAAK","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","H             I"],UF=[[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFyFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFwF "," FFFFFFFFFFFsF "," F FGFFFFFPFFF "," F    FPFFF  F "," FF   FFF   FF ","WFFFGFFFFF    W"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X        f    X","X             X","X     aaaa    X","X     a c     X","X     a   b   X","X     a       X","X     a       X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X        NaLMNX","X        M    X","X        L    X","X        O    X","X      LMN    X","XLMNaLMN      X","X         b   X","X             X","X    aa       X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFGFFFF "," FFFGFGFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFGGFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFGGFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X          b  X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FGFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFGFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFGGGFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," GFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFG "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFG ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," GFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," GFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," GFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X             X","X         b   X","X             X","X             X","X             X","U      u      U"," XXXXXXXXXXXXX "],EF]],pF=[],yF={},AF=(F,X)=>{if(void 0===X||1===X)return pF[F];{let t=yF[F];t||(yF[F]={},t=yF[F]);let e=h(16*X),W=t[e];return W||(t[e]=hF(F,(F=>{F[0]=F[0]*X,F[1]=F[1]*X,F[2]=F[2]*X})),W=t[e]),W}},SF=(F,X)=>{if(0==X)return pF[F];{let t=yF[F];t||(yF[F]={},t=yF[F]);let e=t[X];if(!e){let W=X>>16&255,o=X>>8&255,i=255&X;t[X]=hF(F,(F=>{F[0]=W,F[1]=o,F[2]=i})),e=t[X]}return e}},hF=(F,X)=>{let t=e(pF[F]),l=i(t),f=Y(t),n=W();G(n,l),r(n,f);let a=t.getImageData(0,0,l,f),d=n.getImageData(0,0,l,f),s=a.data,c=d.data,u=0;for(;u<s.length;){let F=s.slice(u,u+4);X(F),c.set(F,u),u+=4}return n.putImageData(d,0,0),o(n)},mF=[],MF=()=>{for(let F of C)if(U(F)){let X=F.j;if(X.B)for(let F=0;F<16;F++){let t={id:X.B.id,brightness:F/16,run(){AF(this.id,this.brightness)}};mF.push(t)}}},LF=0,wF=V(),NF={eF:0,WF:0,h:0,oF:0},TF=()=>{NF.h=130,(F=>{let X=UF[F];C.splice(0,C.length);let t=0;for(let F of X){let X=0,W=0;for(let o of F){for(let F of o){if(" "!==F){let o=(e=FF[F],JSON.parse(JSON.stringify(e)));C.push({x:X,y:W,z:t,j:o})}X+=P}X=0,W+=P}t+=P}var e})(NF.eF),oF(),uF.XF=!1,uF.tF=0,MF()},kF=()=>{if(NF.h<=0)return;let F=h(NF.h);NF.h-=d.i;let X=h(NF.h);if(F!=X&&X<=13){let F=5;cF(6,.1+.5*v(0,1,(X-F)/(0-F)))}NF.h<=0&&((async()=>{for(let F of C)p(F)&&rF(F,g(0,1))})(),cF(3),LF=.5)};let DF,OF=(()=>{let F=[];return F[47]=-1,F.push(22,23,24,25,26,27,28,29,30,31),F[64]=-1,F.push(32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57),F})(),vF=F=>OF[F],gF=e(F.getElementById("c")),VF=0,xF=0,IF=1,$F={},CF=!1,HF=!1,RF={},KF=F=>$F[F],zF=F=>delete $F[F],jF=F=>`rgba(${F>>16&255},${F>>8&255},${255&F},${(F>>24&255)/255})`,JF=W(),qF=(F,X)=>F.y+F.z-X.y-X.z,BF=()=>{G(gF,VF),r(gF,xF);let F=h(VF/IF),X=h(xF/IF);G(JF,F),r(JF,X),n(JF);let t=h((F-240)/2);switch(function(F,X){let t=wF.x+F,e=wF.y+X;C.sort(qF),eX();for(let F of C){let X=h(t+F.x),W=h(e+F.y-F.z),o=F.j,i=o.FF||P;tX(JF,X,W,o.B),tX(JF,X,W-i,o.Q)}}(t,64),ZF(t),DF&&(XX(JF,DF.iF.x/IF,DF.iF.y/IF,30,1442840575),XX(JF,DF.YF.x/IF,DF.YF.y/IF,10,2583691263)),NF.WF){case 0:WX(4278190080,["CUBE 13",QF]);break;case 3:WX(3144024064,["LEVEL FAIL","TRY AGAIN",QF]);break;case 2:WX(3137365504,["LEVEL PASSED",`NEXT LEVEL ${NF.eF+2}`,`TOTAL LEVELS ${UF.length}`,QF]);break;case 4:WX(3140681728,["GAME OVER",QF]);break;case 5:WX(3137378560,["CONGRATULATIONS",QF])}_F(X),n(gF),gF.setTransform(IF,0,0,IF,0,0),gF.imageSmoothingEnabled=!1,f(gF,o(JF),0,0)},QF=X?"TAP TO CONTINUE":"PRESS ANY KEY TO CONTINUE";let ZF=(F,X)=>{l(JF);for(let X=0;X<NF.oF;X++)f(JF,pF[58],F+1+8*X,10);FX(JF,F,1,"LIVES "+NF.oF,16721408);let t=m(NF.h),e=M(m(NF.h),13);for(let X=0;X<e;X++)f(JF,pF[59],F+224+8-8*X,10);let W=L(0,t)+" TIME";FX(JF,F+240-1-8*W.length,1,W,38655);let o="LEVEL "+(NF.eF+1);FX(JF,h(F+(240-8*o.length)/2),1,o,16777215)},_F=F=>{{let X=(a()-d.o).toFixed(),t=(1/d.i).toFixed(),e="";FX(JF,1,F-9,`FPS ${t} TIME ${X} TASK ${mF.length} ${e}`,16777215)}},FX=(F,X,t,e,W)=>{l(F);for(let o=0;o<e.length;o++){let i=e.charCodeAt(o),Y=vF(i);if(void 0!==Y){let e=SF(Y,W);f(F,e,X+8*o,t)}}},XX=(F,X,t,e,W)=>{l(F),F.beginPath(),F.arc(h(X),h(t),h(e),0,O,!1),F.lineWidth=2,F.strokeStyle=jF(W),F.stroke()},tX=(F,X,t,e)=>{if(e){let W=AF(e.id,e.brigthness),o=e._||j;F.setTransform(o.a,o.b,o.c,o.d,o.e+X,o.f+t),f(F,W,0,0)}},eX=()=>{for(let F of C){let X=v(0,1,(F.z- -32)/32),t=F.j;t.B&&(t.B.brigthness=X),t.Q&&(t.Q.brigthness=X)}};function WX(F,X){let t=i(JF),e=Y(JF);l(JF),JF.fillStyle=jF(F),JF.fillRect(0,0,t,e);let W=8*(3*X.length-2),o=8*X.reduce(((F,X)=>L(F,X.length)),0),G=0+(t-o)/2,r=0+(e-W)/2;for(let F=0;F<X.length;F++){let t=X[F];FX(JF,h(G+(o-8*t.length)/2),h(r+3*F*8),t,16777215)}}let oX=[60,61,62,63],iX=[64,65,66,67],YX=[68,69,70,71],GX=[72,73,74,75],rX={tF:0},lX=()=>{let F=d.i,X=H(0);if(X){let o=V();if(KF(37)||KF(65)?o.x=-1:(KF(39)||KF(68))&&(o.x=1),KF(38)||KF(87)?o.y=-1:(KF(40)||KF(83))&&(o.y=1),DF){let F=x(DF.iF,DF.YF),X=k((W=F).y,W.x);X<0&&(X+=O);let t=h((X+D/8)/(D/4));o=0==t?V(1,0):1==t?V(1,1):2==t?V(0,1):3==t?V(-1,1):4==t?V(-1,0):5==t?V(-1,-1):6==t?V(0,-1):V(1,7==t?-1:0)}if(I(o)>0){let W=oX;o.x<0?W=GX:o.x>0&&(W=iX),o.y<0?W=YX:o.y>0&&(W=oX),rX.tF+=10*F;let i=h(rX.tF%W.length);X.j.B.id=W[i],$(o,30*F),e=o,(t=X).x+=e.x,t.y+=e.y}}var t,e,W},fX=()=>{let F=H(0);F&&F.z<-48&&(NF.oF--,async function(){NF.WF=NF.oF>0?3:4}())};let nX=!1,aX=()=>{if(CF||HF&&!nX)switch(CF=!1,zF(32),NF.WF){case 0:NF.eF=0,NF.oF=UF.length,TF(),NF.WF=1;break;case 3:TF(),NF.WF=1;break;case 2:NF.eF++,TF(),NF.WF=1;break;case 4:case 5:NF.WF=0}nX=HF},dX=()=>{let F=H(0),X=(t=9,C.filter((F=>F.j.id===t)));var t;if(F&&F.z==P&&F.j.Z&&X.length){let t=F.j.Z.q;for(let e of X)0==e.z&&A(t,F,Q,e)&&(lF(e),cF(0))}};function sX(){(()=>{let F=d.o;d.o=a(),d.i=(d.o-F)/1e3})(),VF=innerWidth*t,xF=innerHeight*t,IF=M(VF/240,xF/304),(()=>{if(X)if(DF)if(RF[DF.id]){DF.YF=RF[DF.id];let F=x(DF.iF,DF.YF),X=I(F),t=30*IF;X>t&&($(F,t),DF.YF.x=DF.iF.x+F.x,DF.YF.y=DF.iF.y+F.y)}else DF=void 0;else for(let F in RF){DF={id:F,iF:RF[F],YF:RF[F]};break}})(),1==NF.WF&&(lX(),(()=>{if(uF.XF)return;let F=[];PF(F,2,1,16),PF(F,4,3,19),PF(F,6,5,21);let X=0;for(let t of F)0==t.z&&X++;if(X==F.length){for(let X of F)delete X.j.id;uF.XF=!0,console.log("door open")}})(),dX(),(()=>{if(uF.XF&&uF.tF<bF.length){uF.tF+=5*d.i;let F=h(uF.tF),X=H(7);if(X)if(F<bF.length)X.j.B.id=bF[F];else{X.j.B=void 0,X.j.Z=void 0,oF();let F=H(8);F&&(F.j.B.id=89,cF(2))}}})(),(()=>{let F=H(0),X=H(7);F&&X&&N(F.x-X.x)<8&&F.y<X.y&&(cF(5),NF.eF==UF.length-1?NF.WF=5:NF.WF=2)})(),kF(),fX()),iF(),LF>0&&(LF-=d.i,wF.x=g(-4,4),wF.y=g(-4,4),LF<=0&&(wF.x=0,wF.y=0)),aX(),(()=>{let F=a();for(;mF.length&&(mF.shift().run(),!(a()-F>1)););})(),(()=>{let F=d.i;s=s.filter((X=>{if(X.m>0)return X.m-=F,!0;{X.h+=F;const{r:t,l:e,n:W,p:o,T:i,k:Y,v:G}=X;if(X.h>i)return t[e]=o,G&&G(),!1;{let F=Y(X.h/i);return t[e]=W+(o-W)*F,!0}}}))})(),BF(),requestAnimationFrame(sX)}!async function(){await async function(){let F=await fetch("r"),X=await F.arrayBuffer(),t=new Uint8Array(X),e=0,i=4*t[e++],Y=t.slice(e,e+i);e+=i;let l=t[e++];for(;l--;){let F=t[e++],X=t[e++],i=F*X,l=t.slice(e,e+i);e+=i;let f=W();G(f,F),r(f,X);let n=f.getImageData(0,0,F,X);for(let F=0;F<l.length;F++){let X=l[F]<<2;n.data.set(Y.slice(X,X+4),F<<2)}f.putImageData(n,0,0),pF.push(o(f))}let f=t[e++];for(;f--;){let F=t[e++];aF.push(X.slice(e,e+F)),e+=F}}(),(()=>{F.onkeydown=F=>{HF=!0,$F[F.keyCode]=!0},F.onkeyup=F=>{HF=!1,zF(F.keyCode)};let e=o(gF);if(X){let F=(F,X)=>{let e=F.changedTouches;for(let F=0;F<e.length;F++){const{clientX:W,clientY:o,identifier:i}=e[F];X(i,V(W*t,o*t))}},X=X=>F(X,((F,X)=>{RF[F]=X})),W=X=>F(X,((F,X)=>{delete RF[F]}));e.ontouchstart=X,e.ontouchmove=X,e.ontouchend=W,e.ontouchcancel=W}e.onclick=()=>{CF=!0,sF()}})(),sX()}()}();
