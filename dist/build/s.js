!function(){"use strict";let F=document,t=devicePixelRatio,e=F=>F.getContext("2d"),o=()=>e(F.createElement("canvas")),i=F=>F.canvas,r=F=>i(F).width,l=F=>i(F).height,a=(F,t)=>i(F).width=t,f=(F,t)=>i(F).height=t,n=F=>F.resetTransform(),d=()=>performance.now(),X={o:d(),i:0},u=[],c=F=>F*F,s=F=>F<1/2.75?7.5625*F*F:F<2/2.75?7.5625*(F-=1.5/2.75)*F+.75:F<2.5/2.75?7.5625*(F-=2.25/2.75)*F+.9375:7.5625*(F-=2.625/2.75)*F+.984375,W=(F,t,e,o,i,r,l)=>{let a=F[t];u.push({r:F,l:t,n:a,p:e,m:0,offsetS:o,h:i,easing:r,v:l})},b=16,p=(F,t,e,o)=>({w:F,g:t,k:F+e,V:t+o}),Y=Math,G=Y.floor,m=Y.min,y=Y.max,M=Y.hypot,A=Y.abs,h=Y.random,v=(F,t,e)=>m(t,y(F,e)),E=(F,t)=>{let e=(F=>M(F.x,F.y))(F);e>0&&(e=t/e,F.x*=e,F.y*=e)},D=[],x=F=>D.find((t=>t.$.id===F)),w=[],S=()=>{w.splice(0,w.length);for(let F of D)F.$.j&&w.push(F)},N=(F,t,e,o)=>{let i=((F,t,e,o)=>F.w+t.x<e.k+o.x&&F.g+t.y<e.V+o.y&&e.w+o.x<F.k+t.x&&e.g+o.y<F.V+t.y)(F.$.j.J,F,t.$.j.J,t);if(i){let i=((F,t)=>({x:t.x-F.x,y:t.y-F.y}))(F,t);E(i,1),A(i.x)>A(i.y)?(F.x-=i.x*e,t.x+=i.x*o,F.y=G(F.y),t.y=G(t.y)):(F.y-=i.y*e,t.y+=i.y*o,F.x=G(F.x),t.x=G(t.x))}return i},O=30,P=new AudioContext,g=1*(Math.exp(.5)-1);function L(F){let t=function(F){let t=0,e=F[5],o=Math.abs(F[6]),i=F[6]>0,r=F[7],l=F[8],a=F[13],f=F[14],n=F[11],d=F[12],X=e,u=r,c=a,s=f,W=d,b=F[0],p=F[18],Y=.1!==p,G=F[19],m=F[20],y=F[21],M=F[22],A=F[10],h=F[9],v=[F[1],F[2],F[4]],E=F[3],D=F[16],x=F[17],w=F[15],S=0,N=0,O=0,P=new Float32Array(32);for(let F=0;F<32;++F)P[F]=2*Math.random()-1;let L=0,U=0,H=0,k=0,V=0,z=new Float32Array(1024);for(let F=0;F<1024;++F)z[F]=0;let C=[];for(let F=0;0!==w&&++t>=w&&(X=e,u=r,c=a,s=f,W=d),0!==W&&F>=W&&(W=0,X*=n),u+=l,X*=u,!(X>o&&(X=o,i));++F){let F=X;h>0&&(H+=A,F=X*(1+Math.sin(H)*h));let t=Math.floor(F);if(t<8&&(t=8),c+=s,c<0&&(c=0),c>.5&&(c=.5),++U>v[L]&&(U=0,++L>2))break;let e,o=U/v[L];e=0===L?o:1===L?1+2*(1-o)*E:1-o,D+=x;let i=Math.abs(Math.floor(D));i>1023&&(i=1023),0!==M&&(y*=M,y<1e-5&&(y=1e-5),y>.1&&(y=.1));let r=0;for(let F=0;F<8;++F){let F=0;if(++k,k>=t&&(k%=t,3===b))for(let F=0;F<32;++F)P[F]=2*Math.random()-1;let o=k/t;0===b?F=o<c?.5:-.5:1===b?F=o<c?2*o/c-1:1-2*(o-c)/(1-c):2===b?F=Math.sin(2*o*Math.PI):3===b&&(F=P[32*k/t|0]);let l=S;p*=G,p<0&&(p=0),p>.1&&(p=.1),Y?(N+=(F-S)*p,N-=N*m):(S=F,N=0),S+=N,O+=S-l,O-=O*y,F=O,z[1023&V]=F,F+=z[V-i+1024&1023],V=V+1&1023,r+=F*e}C.push(r*g/8)}return new Float32Array(C)}(F),e=P.createBuffer(1,t.length,44100);return e.copyToChannel(t,0,0),e}let U=[],H=[];function k(F,t=1){H[F]||(H[F]=L(new Float32Array(U[F])));let e=P.createBufferSource();e.buffer=H[F];let o=P.createGain();o.gain.value=.5*t,e.connect(o),o.connect(P.destination),e.start()}let V={q:!1,R:0},z=[4,5,6,7],C=()=>{let F=x(2),t=x(1);var e,o,i,r;F&&F.$.j&&t&&(r=t,M((i=F).x-r.x,i.y-r.y)<2&&(e=t,(o=F).x=e.x,o.y=e.y,F.$.j=void 0,S(),W(F,"z",8,0,.4,s,(()=>{t.$.T.id=12,(F=>{D.splice(D.indexOf(F),1)})(F),V.q=!0,k(0)}))))},I={a:1,b:0,c:0,d:1,e:0,f:0},$={a:0,b:1,c:-1,d:0,e:b,f:0},j={a:-1,b:0,c:0,d:-1,e:b,f:b},J={a:0,b:-1,c:1,d:0,e:0,f:b},K={B:!0,J:p(0,0,b,b)},q={J:p(0,0,b,b)},R={A:{Q:{id:41},T:{id:O}},Y:{Q:{id:33},j:K},C:{T:{id:31}},K:{T:{id:31,Z:$}},D:{T:{id:O,Z:J}},E:{T:{id:O,Z:$}},F:{T:{id:8},Q:{id:45}},G:{T:{id:9},Q:{id:45}},P:{T:{id:10},Q:{id:45}},S:{T:{id:13},Q:{id:45}},W:{Q:{id:45}},U:{Q:{id:44},j:K},H:{Q:{id:44},T:{id:O,Z:J}},I:{Q:{id:44},T:{id:O,Z:$}},L:{Q:{id:33},T:{id:32},j:K},M:{Q:{id:34},T:{id:32,Z:$},j:K},N:{Q:{id:35},T:{id:32,Z:j},j:K},O:{Q:{id:36},T:{id:32,Z:J},j:K},X:{j:K},a:{j:q,Q:{id:0},T:{id:1},_:8},b:{j:q,Q:{id:2},T:{id:3},_:8,id:2},u:{j:{J:p(3,10,9,7)},Q:{id:22},id:0},s:{T:{id:11},id:1},t:{Q:{id:42},T:{id:O},id:4},d:{Q:{id:4},T:{id:O},j:K,id:3}},T=["CAAAAAAtAAAAAAK","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","H             I"],B=[[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFFFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X     aaaa    X","X     a       X","X     a   b   X","X     a       X","X    aa       X","X             X","U      u      U"," XXXXXXXXXXXXX "],T],[[" WWWWWWSWWWWWW "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF ","WFFFGFFFFFFPFFW"],[" YYYYYYdYYYYYY ","X             X","X             X","X        NOLMNX","X        M    X","X        L    X","X        O    X","X      LMN    X","XLMNaLMN      X","X         b   X","X             X","X    aa       X","X             X","U      u      U"," XXXXXXXXXXXXX "],T]],Q=[],Z={},_=(F,t)=>{if(void 0===t||1===t)return Q[F];{let n=Z[F];n||(Z[F]={},n=Z[F]);let d=G(32*t),X=n[d];if(!X){let u=e(Q[F]),c=r(u),s=l(u),W=o();a(W,c),f(W,s);let b=u.getImageData(0,0,c,s),p=W.getImageData(0,0,c,s),Y=b.data,G=p.data,m=0;for(;m<Y.length;)G[m]=Y[m++]*t,G[m]=Y[m++]*t,G[m]=Y[m++]*t,G[m]=Y[m++];W.putImageData(p,0,0),n[d]=i(W),X=n[d]}return X}},FF=[],tF=()=>{for(let F of D)if(F.x>0&&F.x<224&&F.y>0&&F.y<224){let t=F.$;if(t.Q){let F={id:t.Q.id,run(){for(let F=0;F<32;F++)_(this.id,F/32)}};FF.push(F)}}};var eF;!function(F){F[F.MainMenu=0]="MainMenu",F[F.Game=1]="Game",F[F.NextLevel=2]="NextLevel",F[F.GameOver=3]="GameOver"}(eF||(eF={}));let oF={FF:0,state:eF.Game,time:0},iF=()=>{(F=>{let t=B[F];D.splice(0,D.length);let e=0;for(let F of t){let t=0,i=0;for(let r of F){for(let F of r){if(" "!==F){let r=(o=R[F],JSON.parse(JSON.stringify(o)));D.push({x:t,y:i,z:e,$:r})}t+=b}t=0,i+=b}e+=b}var o})(oF.FF),S(),V.q=!1,V.R=0,tF(),oF.time=0},rF=()=>{let F=X.i,t=G(oF.time);oF.time+=F;let e=G(oF.time);if(t!=e&&e<=13){let F=5;k(5,.1+.5*v(0,1,(e-F)/(13-F)))}oF.time>=13&&(oF.state=eF.GameOver,(()=>{let F=[];for(let i=1;i<14;i++)for(let r=1;r<14;r++)F[13*r+i]=(t=0,e=1,o=h(),t+o*(e-t));var t,e,o;for(let t of D)if(t.x>0&&t.x<224&&t.y>0&&t.y<224){let e=G(t.x/b),o=F[13*G(t.y/b)+e]||0;W(t,"z",-80,o,.5,c)}k(2)})())},lF={},aF=F=>lF[F],fF=(F,t)=>F.y+F.z-t.y-t.z,nF=(()=>{let F=o();return a(F,240),f(F,288),F})(),dF=e(F.getElementById("c")),XF=(F,t,e,o)=>{if(o){let i=_(o.id,o.brigthness),r=o.Z||I;F.setTransform(r.a,r.b,r.c,r.d,r.e+t,r.f+e),F.drawImage(i,0,0)}},uF=()=>{for(let F of D){let t=v(0,1,(F.z- -48)/48),e=F.$;e.Q&&(e.Q.brigthness=t),e.T&&(e.T.brigthness=t)}},cF=[14,15,16,17],sF=[18,19,20,21],WF=[22,23,24,25],bF=[26,27,28,29],pF={R:0};let YF=()=>{let F=x(0),t=x(3);F&&t&&A(F.x-t.x)<8&&F.y<t.y&&(oF.FF++,oF.FF=oF.FF%B.length,iF(),k(4))};function GF(){(()=>{let F=X.o;X.o=d(),X.i=(X.o-F)/1e3})(),oF.state==eF.Game&&((()=>{let F=X.i,t=x(0);if(t){let i,r=((F=0,t=0)=>({x:F,y:t}))();if(aF(37)?(i=bF,r.x=-1):aF(39)&&(i=sF,r.x=1),aF(38)?(i=WF,r.y=-1):aF(40)&&(i=cF,r.y=1),i){pF.R+=10*F;let l=G(pF.R%i.length);t.$.Q.id=i[l],E(r,30*F),o=r,(e=t).x+=o.x,e.y+=o.y}}var e,o})(),(()=>{let F=w.length,t=20;for(;t--;){let t=0;for(let e=0;e<F;e++){let o=w[e];for(let i=e+1;i<F;i++){let F=w[i],e=!1;o.$.j.B?F.$.j.B||(e=N(o,F,0,1)):e=F.$.j.B?N(o,F,1,0):N(o,F,.5,.5),e&&t++}}if(!t)break}})(),C(),(()=>{if(V.q&&V.R<z.length){V.R+=5*X.i;let F=G(V.R),t=x(3);if(t)if(F<z.length)t.$.Q.id=z[F];else{t.$.Q=void 0,t.$.j=void 0,S();let F=x(4);F&&(F.$.Q.id=43,k(1))}}})(),YF(),rF()),(()=>{let F=FF.shift();F&&F.run()})(),(()=>{let F=X.i;u=u.filter((t=>{if(t.offsetS>0)return t.offsetS-=F,!0;{t.m+=F;const{r:e,l:o,n:i,p:r,h:l,easing:a,v:f}=t;if(t.m>l)return e[o]=r,f&&f(),!1;{let F=a(t.m/l);return e[o]=i+(r-i)*F,!0}}}))})(),(()=>{let F=r(nF),e=l(nF),o=i(nF);n(nF),nF.fillRect(0,0,F,e),D.sort(fF),uF();for(let F of D){let t=G(F.x+0),e=G(F.y+64-F.z),o=F.$,i=o._||b;XF(nF,t,e,o.Q),XF(nF,t,e-i,o.T)}let u=innerWidth*t,c=innerHeight*t;r(dF)!=u&&a(dF,u),l(dF)!=c&&f(dF,c);let s=r(dF),W=l(dF),p=m(s/F,W/e);n(dF),dF.clearRect(0,0,s,W),dF.setTransform(p,0,0,p,0,0),dF.imageSmoothingEnabled=!1,dF.drawImage(o,0,0);{let F=(d()-X.o).toFixed(),t=(1/X.i).toFixed(),e="";dF.fillStyle="white",dF.font="arial 20px",dF.fillText(`FPS ${t}   TIME ${F} ms   ${e}`,0,20)}})(),requestAnimationFrame(GF)}!async function(){await async function(){let F=await fetch("r"),t=await F.arrayBuffer(),e=new Uint8Array(t),r=0,l=4*e[r++],n=e.slice(r,r+l);r+=l;let d=e[r++];for(;d--;){let F=e[r++],t=e[r++],l=F*t,d=e.slice(r,r+l);r+=l;let X=o();a(X,F),f(X,t);let u=X.getImageData(0,0,F,t);for(let F=0;F<d.length;F++){let t=d[F]<<2;u.data.set(n.slice(t,t+4),F<<2)}X.putImageData(u,0,0),Q.push(i(X))}let X=e[r++];for(;X--;){let F=e[r++];U.push(t.slice(r,r+F)),r+=F}}(),F.onkeydown=F=>{lF[F.keyCode]=!0},F.onkeyup=F=>{lF[F.keyCode]=void 0},iF(),GF()}()}();
