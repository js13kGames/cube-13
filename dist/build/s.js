!function(){"use strict";let F=document,t=devicePixelRatio,e=F=>F.getContext("2d"),o=()=>e(F.createElement("canvas")),i=F=>F.canvas,r=F=>i(F).width,l=F=>i(F).height,a=(F,t)=>i(F).width=t,n=(F,t)=>i(F).height=t,X=()=>performance.now(),f={o:X(),i:0},d=[],c=16,b=(F,t,e,o)=>({r:F,l:t,n:F+e,p:t+o}),s=Math,u=s.floor,p=s.min,Y=s.hypot,m=s.abs,y=(F,t)=>{let e=(F=>Y(F.x,F.y))(F);e>0&&(e=t/e,F.x*=e,F.y*=e)},G=[],A=F=>G.find((t=>t.m.id===F)),M=[],h=()=>{M.splice(0,M.length);for(let F of G)F.m.h&&M.push(F)},E=(F,t,e,o)=>{let i=((F,t,e,o)=>F.r+t.x<e.n+o.x&&F.l+t.y<e.p+o.y&&e.r+o.x<F.n+t.x&&e.l+o.y<F.p+t.y)(F.m.h.v,F,t.m.h.v,t);if(i){let i=((F,t)=>({x:t.x-F.x,y:t.y-F.y}))(F,t);y(i,1),m(i.x)>m(i.y)?(F.x-=i.x*e,t.x+=i.x*o,F.y=u(F.y),t.y=u(t.y)):(F.y-=i.y*e,t.y+=i.y*o,F.x=u(F.x),t.x=u(t.x))}return i},D=30,v=new AudioContext,w=1*(Math.exp(.5)-1);function x(F){let t=function(F){let t=0,e=F[5],o=Math.abs(F[6]),i=F[6]>0,r=F[7],l=F[8],a=F[13],n=F[14],X=F[11],f=F[12],d=e,c=r,b=a,s=n,u=f,p=F[0],Y=F[18],m=.1!==Y,y=F[19],G=F[20],A=F[21],M=F[22],h=F[10],E=F[9],D=[F[1],F[2],F[4]],v=F[3],x=F[16],S=F[17],N=F[15],P=0,O=0,g=0,L=new Float32Array(32);for(let F=0;F<32;++F)L[F]=2*Math.random()-1;let U=0,H=0,k=0,V=0,C=0,I=new Float32Array(1024);for(let F=0;F<1024;++F)I[F]=0;let $=[];for(let F=0;0!==N&&++t>=N&&(d=e,c=r,b=a,s=n,u=f),0!==u&&F>=u&&(u=0,d*=X),c+=l,d*=c,!(d>o&&(d=o,i));++F){let F=d;E>0&&(k+=h,F=d*(1+Math.sin(k)*E));let t=Math.floor(F);if(t<8&&(t=8),b+=s,b<0&&(b=0),b>.5&&(b=.5),++H>D[U]&&(H=0,++U>2))break;let e,o=H/D[U];e=0===U?o:1===U?1+2*(1-o)*v:1-o,x+=S;let i=Math.abs(Math.floor(x));i>1023&&(i=1023),0!==M&&(A*=M,A<1e-5&&(A=1e-5),A>.1&&(A=.1));let r=0;for(let F=0;F<8;++F){let F=0;if(++V,V>=t&&(V%=t,3===p))for(let F=0;F<32;++F)L[F]=2*Math.random()-1;let o=V/t;0===p?F=o<b?.5:-.5:1===p?F=o<b?2*o/b-1:1-2*(o-b)/(1-b):2===p?F=Math.sin(2*o*Math.PI):3===p&&(F=L[32*V/t|0]);let l=P;Y*=y,Y<0&&(Y=0),Y>.1&&(Y=.1),m?(O+=(F-P)*Y,O-=O*G):(P=F,O=0),P+=O,g+=P-l,g-=g*A,F=g,I[1023&C]=F,F+=I[C-i+1024&1023],C=C+1&1023,r+=F*e}$.push(r*w/8)}return new Float32Array($)}(F),e=v.createBuffer(1,t.length,44100);return e.copyToChannel(t,0,0),e}let S=[],N=[];function P(F,t){N[F]||(N[F]=x(new Float32Array(S[F])));let e=v.createBufferSource();e.buffer=N[F];let o=v.createGain();o.gain.value=t,e.connect(o),o.connect(v.destination),e.start()}let O={w:!1,g:0},g=[4,5,6,7],L=()=>{let F=A(2),t=A(1);var e,o,i,r;F&&F.m.h&&t&&(r=t,Y((i=F).x-r.x,i.y-r.y)<2&&(e=t,(o=F).x=e.x,o.y=e.y,F.m.h=void 0,h(),((F,t,e,o,i)=>{let r=F[t];d.push({k:F,V:t,$:r,j:e,J:0,q:o,R:i})})(F,"z",8,.5,(()=>{t.m.T.id=12,(F=>{G.splice(G.indexOf(F),1)})(F),O.w=!0,P(0,1)}))))},U={time:0},H={a:1,b:0,c:0,d:1,e:0,f:0},k={a:0,b:1,c:-1,d:0,e:c,f:0},V={a:-1,b:0,c:0,d:-1,e:c,f:c},C={a:0,b:-1,c:1,d:0,e:0,f:c},I={W:!0,v:b(0,0,c,c)},$={v:b(0,0,c,c)},j={A:{B:{id:41},T:{id:D}},Y:{B:{id:33},h:I},C:{T:{id:31}},K:{T:{id:31,Q:k}},D:{T:{id:D,Q:C}},E:{T:{id:D,Q:k}},F:{T:{id:8}},G:{T:{id:9}},P:{T:{id:10}},S:{T:{id:13}},U:{B:{id:41},h:I},H:{B:{id:41},T:{id:D,Q:C}},I:{B:{id:41},T:{id:D,Q:k}},L:{B:{id:33},T:{id:32},h:I},M:{B:{id:34},T:{id:32,Q:k},h:I},N:{B:{id:35},T:{id:32,Q:V},h:I},O:{B:{id:36},T:{id:32,Q:C},h:I},X:{h:I},a:{h:$,B:{id:0},T:{id:1},Z:8},b:{h:$,B:{id:2},T:{id:3},Z:8,id:2},u:{h:{v:b(3,10,9,7)},B:{id:22},id:0},s:{T:{id:11},id:1},t:{B:{id:42},T:{id:D},id:4},d:{B:{id:4},T:{id:D},h:I,id:3}},z=["CAAAAAAtAAAAAAK","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","D             E","H             I"],J=[[["       S       "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFFFFFFF "," FFFGFFFFFFFFF "," FFFGFFFFFFPFF "],[" YYYYYYdYYYYYY ","X             X","X             X","X             X","X             X","X             X","X             X","X     aaaa    X","X     a       X","X     a   b   X","X     a       X","X    aa       X","X             X","U      u      U"," XXXXXXXXXXXXX "],z],[["       S       "," FFFFFFFFFFFFF "," FFPFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFFF "," FFFGFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFFFFFFFF "," FFFFFFGGGFFFF "," FFFFFFFFFFFsF "," FFFGFFFFFFFFF "," FFFGFFFPFFFFF "," FFFGFFFFFFFFF "," FFFGFFFFFFPFF "],[" YYYYYYdYYYYYY ","X             X","X             X","X        NOLMNX","X        M    X","X        L    X","X        O    X","X      LMN    X","XLMNaLMN      X","X         b   X","X             X","X    aa       X","X             X","U      u      U"," XXXXXXXXXXXXX "],z]],K=F=>{let t=J[F];G.splice(0,G.length);let e=0;for(let F of t){let t=0,i=0;for(let r of F){for(let F of r){if(" "!==F){let r=(o=j[F],JSON.parse(JSON.stringify(o)));G.push({x:t,y:i,z:e,m:r})}t+=c}t=0,i+=c}e+=c}var o;h(),O.w=!1,O.g=0,U.time=0},q={_:0},R=[],T=(F,t)=>F.y+F.z-t.y-t.z,W=(()=>{let F=o();return a(F,240),n(F,288),F})(),B=e(F.getElementById("c")),Q=(F,t,e,o)=>{if(o){let i=R[o.id],r=o.Q||H;F.setTransform(r.a,r.b,r.c,r.d,r.e+t,r.f+e),F.drawImage(i,0,0)}},Z={},_=F=>Z[F],FF=[14,15,16,17],tF=[18,19,20,21],eF=[22,23,24,25],oF=[26,27,28,29],iF={g:0};let rF=()=>{let F=A(0),t=A(3);F&&t&&m(F.x-t.x)<8&&F.y<t.y&&(console.log("win!"),q._++,q._=q._%J.length,K(q._),P(4,1))};function lF(){(()=>{let F=f.o;f.o=X(),f.i=(f.o-F)/1e3})(),(()=>{let F=f.i,t=A(0);if(t){let i,r=((F=0,t=0)=>({x:F,y:t}))();if(_(37)?(i=oF,r.x=-1):_(39)&&(i=tF,r.x=1),_(38)?(i=eF,r.y=-1):_(40)&&(i=FF,r.y=1),i){iF.g+=10*F;let l=u(iF.g%i.length);t.m.B.id=i[l],y(r,30*F),o=r,(e=t).x+=o.x,e.y+=o.y}}var e,o})(),(()=>{let F=M.length,t=20;for(;t--;){let t=0;for(let e=0;e<F;e++){let o=M[e];for(let i=e+1;i<F;i++){let F=M[i],e=!1;o.m.h.W?F.m.h.W||(e=E(o,F,0,1)):e=F.m.h.W?E(o,F,1,0):E(o,F,.5,.5),e&&t++}}if(!t)break}})(),L(),(()=>{if(O.w&&O.g<g.length){O.g+=5*f.i;let F=u(O.g),t=A(3);if(t)if(F<g.length)t.m.B.id=g[F];else{t.m.B=void 0,t.m.h=void 0,h();let F=A(4);F&&(F.m.B.id=43,P(1,1))}}})(),(()=>{let F=f.i;d=d.filter((t=>{t.J+=F;const{k:e,V:o,$:i,j:r,q:l,R:a}=t;if(t.J>l)return e[o]=r,a&&a(),!1;{let F=t.J/l;return e[o]=i+(r-i)*F,!0}}))})(),rF(),(()=>{let F=f.i,t=u(U.time);U.time+=F;let e=u(U.time);if(t!=e){console.log("timer ",e);let F=5,t=13;if(e>=F&&e<=t){let o=.5*p((e-F)/(t-F),1);console.log("volume",o),P(5,o)}}U.time>=13&&console.log("game over")})(),(()=>{let F=r(W),e=l(W),o=i(W);W.clearRect(0,0,F,e),G.sort(T);for(let F of G){let t=u(F.x+0),e=u(F.y+64-F.z),o=F.m,i=o.Z||c;Q(W,t,e,o.B),Q(W,t,e-i,o.T)}let d=innerWidth*t,b=innerHeight*t;r(B)!=d&&a(B,d),l(B)!=b&&n(B,b);let s=r(B),Y=l(B),m=p(s/F,Y/e);B.clearRect(0,0,s,Y),B.setTransform(m,0,0,m,0,0),B.imageSmoothingEnabled=!1,B.drawImage(o,0,0);{let F=(X()-f.o).toFixed(),t=(1/f.i).toFixed(),e="";B.fillStyle="white",B.font="arial 20px",B.fillText(`FPS ${t}   TIME ${F} ms   ${e}`,0,20)}})(),requestAnimationFrame(lF)}!async function(){await async function(){let F=await fetch("r"),t=await F.arrayBuffer(),e=new Uint8Array(t),r=0,l=4*e[r++],X=e.slice(r,r+l);r+=l;let f=e[r++];for(;f--;){let F=e[r++],t=e[r++],l=F*t,f=e.slice(r,r+l);r+=l;let d=o();a(d,F),n(d,t);let c=d.getImageData(0,0,F,t);for(let F=0;F<f.length;F++){let t=f[F]<<2;c.data.set(X.slice(t,t+4),F<<2)}d.putImageData(c,0,0),R.push(i(d))}let d=e[r++];for(;d--;){let F=e[r++];S.push(t.slice(r,r+F)),r+=F}}(),F.onkeydown=F=>{Z[F.keyCode]=!0},F.onkeyup=F=>{Z[F.keyCode]=void 0},K(q._),lF()}()}();
